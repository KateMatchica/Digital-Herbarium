<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Digital Herbarium</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-troika-text/dist/aframe-troika-text.min.js"></script>
</head>
<body>
    <a-scene shadow="type: pcfsoft">

        <a-assets>
            <img id="sky-lab" src="assets/images/scifi-lab.jpg.jpg" alt="Sci-fi laboratory background sky texture">
            <a-asset-item id="model-fern" src="assets/models/plant-fern.glb"></a-asset-item>
            <a-asset-item id="model-flower" src="assets/models/plant-flower.glb"></a-asset-item>
            <a-asset-item id="model-tree" src="assets/models/plant-tree.glb"></a-asset-item>
        </a-assets>

        <a-sky src="#sky-lab" rotation="0 -90 0"></a-sky>

        <a-entity light="type: ambient; intensity: 0.6; color: #CCC"></a-entity>
        
        <a-entity light="type: directional; intensity: 0.8; castShadow: true" position="-1 4 2"></a-entity>

        <a-entity position="-3 0 -4">
            <a-box id="cube-1" color="#4CC3D9" position="0 1 0" 
                   animation="property: rotation; to: 0 360 0; loop: true; dur: 10000; easing: linear"
                   class="clickable"
                   shadow="cast: true">
            </a-box>
            <a-text value="Project Alpha" position="0 1.6 0" align="center" color="#333" scale="0.5 0.5 0.5"></a-text>

            <a-entity id="hologram-1" visible="false" position="0 2.5 0">
                <a-entity gltf-model="#model-fern" 
                          scale="0.5 0.5 0.5" 
                          animation="property: rotation; to: 0 360 0; loop: true; dur: 8000; easing: linear">
                </a-entity>
                <a-plane color="#000" opacity="0.8" width="2" height="1" position="0 1.5 0">
                    <a-text value="Name: Pteridophyta\nStatus: EXTINCT\nEra: Paleozoic" align="center" color="#00FFaa"></a-text>
                </a-plane>
            </a-entity>
        </a-entity>

        <a-entity position="0 0 -4">
            <a-box id="cube-2" color="#FFC65D" position="0 1 0" 
                   animation="property: rotation; to: 0 -360 0; loop: true; dur: 12000; easing: linear"
                   class="clickable"
                   shadow="cast: true">
            </a-box>
            <a-text value="Project Beta" position="0 1.6 0" align="center" color="#333" scale="0.5 0.5 0.5"></a-text>

            <a-entity id="hologram-2" visible="false" position="0 2.5 0">
                <a-entity gltf-model="#model-flower" 
                          scale="2.0 2.0 2.0" 
                          animation="property: rotation; to: 0 360 0; loop: true; dur: 8000; easing: linear">
                </a-entity>
                <a-plane color="#000" opacity="0.8" width="2" height="1" position="0 1.5 0">
                    <a-text value="Name: Gloriosa Superba\nStatus: CRITICAL\nRegion: Tropics" align="center" color="#FFC65D"></a-text>
                </a-plane>
            </a-entity>
        </a-entity>

        <a-entity position="3 0 -4">
            <a-box id="cube-3" color="#EF2D5E" position="0 1 0" 
                   animation="property: rotation; to: 0 360 0; loop: true; dur: 9000; easing: linear"
                   class="clickable" shadow="cast: true">
            </a-box>
            <a-text value="Project Gamma" position="0 1.6 0" align="center" color="#333" scale="0.5 0.5 0.5"></a-text>

            <a-entity id="hologram-3" visible="false" position="0 2.5 0">
                
                <a-entity gltf-model="#model-tree" 
                          position="0 -1 0"
                          scale="0.3 0.3 0.3" 
                          animation="property: rotation; to: 0 360 0; loop: true; dur: 8000; easing: linear">
                </a-entity>

                <a-plane color="#000" opacity="0.8" width="2" height="1" position="0 2.5 0">
                    <a-text value="Name: Sequoia\nStatus: PRESERVED\nType: Conifer" align="center" color="#EF2D5E"></a-text>
                </a-plane>

            </a-entity>
        </a-entity>

        <a-entity position="0 1.6 0">
            <a-camera>
                <a-cursor color="black" 
                          fuse="true" 
                          fuse-timeout="1000"
                          raycaster="objects: .clickable"
                          animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150">
                </a-cursor>
            </a-camera>
        </a-entity>

        <script>
            // This function handles the "Mouse Over" logic
            function setupInteraction(cubeId, hologramId) {
                const cube = document.querySelector(cubeId);
                const hologram = document.querySelector(hologramId);

                // When looking AT the cube
                cube.addEventListener('mouseenter', function () {
                    hologram.setAttribute('visible', 'true'); // Show plant
                    cube.setAttribute('color', '#FFFFFF');    // Turn cube white
                });

                // When looking AWAY from the cube
                cube.addEventListener('mouseleave', function () {
                    hologram.setAttribute('visible', 'false'); // Hide plant
                    
                    // Reset cube colors to original
                    if(cubeId === '#cube-1') cube.setAttribute('color', '#4CC3D9');
                    if(cubeId === '#cube-2') cube.setAttribute('color', '#FFC65D');
                    if(cubeId === '#cube-3') cube.setAttribute('color', '#EF2D5E');
                });
            }

            // Register all 3 exhibits
            setupInteraction('#cube-1', '#hologram-1');
            setupInteraction('#cube-2', '#hologram-2');
            setupInteraction('#cube-3', '#hologram-3');
        </script>

    </a-scene>
</body>
</html>